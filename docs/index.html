<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Project 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="d3/d3.v3.min.js"></script>

    <style type="text/css">
	#exe1{
		position:relative;
		height:auto;
		margin:auto;
	}

	#exe2{
		position:relative;
		height:auto;
		margin:auto;
	}

        p {
		font-size: 15px;
		font-family: Helvetica, Arial, sans-serif;
          }

	div.bar {
		display: inline-block;
		width: 20px;
		height: 75px;
		background-color: teal;
		margin-right: 2px;
	}
	.axis path,
	.axis line {
		fill: none;
		stroke: black;
		shape-rendering: crispEdges;
	}
	.axis text {
		font-family: sans-serif;
		font-size: 11px;
	}
	.labels:hover {
		fill: red;
		font-size:20px;
		font-weight: bold;
	}
	.button {
	   	background-color: #4CAF50;
	   	border: none;
	   	color: white;
	   	padding: 15px 32px;
	   	text-align: center;
	   	text-decoration: none;
	   	display: inline-block;
	   	font-size: 16px;
	}
	.wrapper {
	   	text-align: center;

  </style>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Assignment 2</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/Rickeyhb/socialdataanalysis2017" class="btn">View on Github</a>
    </section>

    <section class="main-content">

	<div id="exe2">
		<h1>Assignment 2B: Visualizing Geodata</h1>
        	<p> The graph below shows prostitution in San Fransico clustered using the k-means algorithm. </p>
        	<div class = 'wrapper' id = 'geoMapGoesHere' > </div>
        	<script type="text/javascript">

			var w = 1000;
			var h = 600;
			var k = 2;
			var kprv = 2;

			var color = 'skyblue';
			var crimes = [];

			var projection = d3.geo.mercator()
                       	.center([-73.94, 40.70])
                       	.translate([w/2, h/2])
                       	.scale([60000]);

        	var path = d3.geo.path()
                 		.projection(projection);

			var geoMap = d3.select('#geoMapGoesHere')
				.append('svg')
			    .attr("width", w )
			    .attr("height", h );


        	d3.json("dataset/NYC.geojson", function(json) {
       			geoMap.selectAll("path")
		           .data(json.features)
		           .enter()
		           .append("path")
		           .attr("d", path);

		        d3.csv('dataset/NOISE.csv', function(d){
			   		for (var i = 0; i < d.length; i++) {
			   			crimes.push([Number(d[i]['lat']), Number(d[i]['lon'])])
			   		}

			   		geoMap.selectAll('.crimes')
				    	.data(crimes)
				    	.enter()
				    	.append('circle')
				    	.attr('cx', function(d){
				    		return projection([d[1], d[0]])[0];
				    	})
				    	.attr('cy', function(d){
				    		return projection([d[1], d[0]])[1];
				    	})
				    	.attr('r', 1)
				    	.attr('class', 'crimes')
				    	.style('opacity', 0.2)
				    	.style('fill', 'yellow');
			   	});
		    });

      //   	var crimes = [];
      //   	var clusters = [[]];
      //   	var nCluster = 2;
      //   	var j = 1;

      //   	d3.json("nyc.geojson", function(json) {
      //  			geoMap.selectAll("path")
		    //        .data(json.features)
		    //        .enter()
		    //        .append("path")
		    //        .attr("d", path);

      //  		    d3.csv('prostituteClustering.csv', function(d){
			   // 		for (var i = 0; i < d.length; i++) {
			   // 			if (Number(d[i]['2']) == -1 || Number(d[i]['2']) >= 10) break;
			   // 			crimes.push([Number(d[i]['lat']), Number(d[i]['lon']), Number(d[i]['2']), Number(d[i]['3']), Number(d[i]['4']), Number(d[i]['5']), Number(d[i]['6'])])
			   // 		} for ( ; i < d.length; i++){
			   // 			if (j > nCluster){
			   // 				nCluster += 1;
			   // 				if (nCluster == 7){
			   // 					break;
			   // 				}
			   // 				clusters.push([]);
			   // 				j = 1;
			   // 			}
			   // 			clusters[clusters.length - 1].push([d[i]['lat'], d[i]['lon'], nCluster, j]);
			   // 			j += 1
			   // 		}

				  //   geoMap.selectAll('.crimes')
				  //   	.data(crimes)
				  //   	.enter()
				  //   	.append('circle')
				  //   	.attr('cx', function(d){
				  //   		return projection([d[1], d[0]])[0];
				  //   	})
				  //   	.attr('cy', function(d){
				  //   		return projection([d[1], d[0]])[1];
				  //   	})
				  //   	.attr('r', 5)
				  //   	.attr('class', 'crimes')
				  //   	.style('opacity', 0.4)
				  //   	.style('fill', function(d){
				  //   		return colorMapping[d[k]];
				  //   	});

				  //   d3.select('#k2')
				  //   	.on('mouseover', function(){
				  //   		kprv = k;
				  //   		k = 2;
				  //   		update();
				  //   	})
				  //   	.on('mouseout', function(){
				  //   		k = kprv;
				  //   		update();
				  //   	})
				  //   	.on('click', function(){
				  //   		k = 2;
				  //   		kprv = 2;
				  //   		update();
				  //   	});
				  //   d3.select('#k3')
				  //   	.on('mouseover', function(){
				  //   		kprv = k;
				  //   		k = 3;
				  //   		update();
				  //   	})
				  //   	.on('mouseout', function(){
				  //   		k = kprv;
				  //   		update();
				  //   	})
				  //   	.on('click', function(){
				  //   		k = 3;
				  //   		kprv = 3;
				  //   		update();
				  //   	});
				  //   d3.select('#k4')
				  //   	.on('mouseover', function(){
				  //   		kprv = k;
				  //   		k = 4;
				  //   		update();
				  //   	})
				  //   	.on('mouseout', function(){
				  //   		k = kprv;
				  //   		update();
				  //   	})
				  //   	.on('click', function(){
				  //   		k = 4;
				  //   		kprv = 4;
				  //   		update();
				  //   	});
				  //   d3.select('#k5')
				  //   	.on('mouseover', function(){
				  //   		kprv = k;
				  //   		k = 5;
				  //   		update();
				  //   	})
				  //   	.on('mouseout', function(){
				  //   		k = kprv;
				  //   		update();
				  //   	})
				  //   	.on('click', function(){
				  //   		k = 5;
				  //   		kprv = 5;
				  //   		update();
				  //   	});
				  //   d3.select('#k6')
				  //   	.on('mouseover', function(){
				  //   		kprv = k;
				  //   		k = 6;
				  //   		update();
				  //   	})
				  //   	.on('mouseout', function(){
				  //   		k = kprv;
				  //   		update();
				  //   	})
				  //   	.on('click', function(){
				  //   		k = 6;
				  //   		kprv = 6;
				  //   		update();
				  //   	});
				  //   geoMap.append('text')
				  //   	.attr('x', 300)
				  //   	.attr('y', 100)
				  //       .attr("text-anchor", "middle")
				  //       .style("font-size", "20px")
				  //       .style("text-decoration", "underline")
				  //   	.text(function(){
				  //   		return 'K = ' + k;
				  //   	})
				  //   	.attr('class', 'ktitle');

				  //   function update(){
					 //    geoMap.selectAll('.crimes')
						// 	.data(crimes)
					 //    	.style('fill', function(d){
					 //    		return colorMapping[d[k]];
					 //    	});
					 //    geoMap.selectAll('.centroids')
					 //    	.remove()
					 //    geoMap.selectAll('.centroids')
					 //    	.data(clusters[k-2])
					 //    	.enter()
					 //    	.append('circle')
					 //    	.attr('cx', function(d){
					 //    		return projection([d[1], d[0]])[0];
					 //    	})
					 //    	.attr('cy', function(d){
					 //    		return projection([d[1], d[0]])[1];
					 //    	})
					 //    	.attr('r', 15)
					 //    	.attr('class', 'centroids')
					 //    	.style('stroke-width', 4)
					 //    	.style('stroke', 'white')
					 //    	.style('fill', 'none');
					 //    geoMap.select('.ktitle')
					 //    	.text(function(){
					 //    		return 'K = ' + k;
					 //    	})
				  //   }
			   //  });
		    // });



        	</script>
		<div class='wrapper'>
	        	<input type="button" class="button" value="K = 2" id='k2'>
	        	<input type="button" class="button" value="K = 3" id='k3'>
	        	<input type="button" class="button" value="K = 4" id='k4'>
	        	<input type="button" class="button" value="K = 5" id='k5'>
	        	<input type="button" class="button" value="K = 6" id='k6'>
        	</div>
		<p>Note: Think carefully about how you can minimize the size of the file containing the data. My file is around 700KB. Why is the size of the file important?</p>
		<p>The size of our file is around 725KB. Data structure was a simple csv file containing each crimes' latitude, longitude, and their cluster id corresponds to K values.</p>
		<p> The size of data matters since every time we change K, we have to process the data.</p>
	</div>

      <footer class="site-footer">
      </footer>
    </section>
  </body>
</html>
